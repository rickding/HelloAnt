<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Hello Fetch</title>

    <link rel="stylesheet" href="style.css">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <h1>Hello Fetch</h1>
    <ul>
    </ul>

  </body>
  <script src="https://cdn.jsdelivr.net/npm/zl-fetch@2.1.5"></script>
  <script>
    function apiRet(data, url) {
      var listItem = document.createElement('li');
      listItem.innerHTML = JSON.stringify(data);
      listItem.innerHTML +=', url: <strong>' + url + '</strong>';

      var myList = document.querySelector('ul');
      myList.appendChild(listItem);
    }
    
    // fetch('https://api.github.com/users/chriscoyier/repos')
    fetch('http://localhost:8011/')
    .then(response => { return response.json(); })
    .then(data => {
      console.log('fetch: ' + JSON.stringify(data));
      apiRet(data, '/')
    });

    // https://github.com/zellwk/zl-fetch
    zlFetch('http://localhost:8011/chk')
    .then(resp => {
      console.log('zlFetch: ' + JSON.stringify(resp));
      apiRet(resp.body, 'chk')
    })
    .catch(e => console.log(e));

    let content = {some: 'content'};
    fetch('http://localhost:8011/chk', {
      method: 'GET',
      credentials: 'include',
      headers: {
        'Content-Type': 'application/json'
      },
      // body: JSON.stringify(content)
    })
    .then(response => { return response.json(); })
    .then(data => {
      console.log('fetch: ' + JSON.stringify(data));
      apiRet(data, 'chk')
    });

  </script>
</html>
